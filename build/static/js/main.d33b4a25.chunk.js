(this["webpackJsonptest-app-1"]=this["webpackJsonptest-app-1"]||[]).push([[0],[,,,,,,,function(e,t,a){e.exports=a.p+"static/media/arrow_move.1663e72a.svg"},function(e,t,a){e.exports=a.p+"static/media/arrow_expand_alt2.3e06be33.svg"},function(e,t,a){e.exports=a.p+"static/media/icon_plus.fb477983.svg"},function(e,t,a){e.exports=a.p+"static/media/icon_trash_alt.e80824a2.svg"},,function(e,t,a){e.exports=a(21)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(6),s=a.n(c),r=a(11),i=a(3),l=a(1),u=a(4),m=a(2),d=(a(17),a(7)),g=a.n(d),b=a(8),v=a.n(b),N="none",f="move",h="resize",p=function(e){var t=e.className,a=e.note,c=a.id,s=a.text,r=a.x,i=a.y,l=a.width,u=a.height,d=e.changeNote,b=e.deleteNote,p=e.field,O=e.setNoteAction,j=Object(n.useState)({x:0,y:0}),E=Object(m.a)(j,2),w=E[0],x=E[1],y=Object(n.useState)(N),S=Object(m.a)(y,2),C=S[0],k=S[1],I=Object(n.useRef)(),L=Object(n.useCallback)((function(e){var t=p.current.getBoundingClientRect(),a=t.x,n=t.y,o=t.width,s=t.height;C===f&&d(c,{x:(e.pageX-a)/o-w.x,y:(e.pageY-n)/s-w.y}),C===h&&d(c,{width:(e.pageX-a)/o-w.x,height:(e.pageY-n)/s-w.y})}),[w,p,c,d,C]),F=Object(n.useCallback)((function(e){var t=p.current.getBoundingClientRect(),a=t.x,n=t.y,o=t.width,s=t.height;k(N),O(N),(e.pageX-a)/o<=.1&&(e.pageY-n)/s>=.9&&b(c)}),[k,O,c,p,b]);Object(n.useEffect)((function(){if(C!==N)return document.addEventListener("mousemove",L),document.addEventListener("mouseup",F),document.addEventListener("mouseleave",F),function(){document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",F),document.removeEventListener("mouseleave",F)}}),[C,L,F]);var _=Object(n.useCallback)((function(e){var t=p.current.getBoundingClientRect(),a=t.x,n=t.y,o=t.width,c=t.height;x({x:(e.pageX-a)/o-r,y:(e.pageY-n)/c-i}),k(f),O(f)}),[p,x,k,r,i,O]),R=Object(n.useCallback)((function(e){var t=p.current.getBoundingClientRect(),a=t.x,n=t.y,o=t.width,c=t.height;x({x:(e.pageX-a)/o-l,y:(e.pageY-n)/c-u}),k(h),O(h)}),[p,x,k,l,u,O]),z=Object(n.useCallback)((function(e){var t=e.currentTarget.value;d(c,{text:t})}),[d,c]);return o.a.createElement("div",{className:"Note Note_color_".concat(c%5," Note_action_").concat(C," ").concat(t||""),style:{"--x":r,"--y":i,"--width":l,"--height":u,zIndex:Math.round(1e4*i)},ref:I},o.a.createElement("textarea",{className:"Note-Text",onChange:z,value:s,placeholder:"Empty note"}),o.a.createElement("div",{className:"Note-Move",onMouseDown:_},o.a.createElement("img",{src:g.a,className:"Note-MoveImg",alt:"move"})),o.a.createElement("div",{className:"Note-Resize",onMouseDown:R},o.a.createElement("img",{src:v.a,className:"Note-ResizeImg",alt:"resize"})))},O=(a(18),a(9)),j=a.n(O),E=a(10),w=a.n(E),x=function(e){var t=e.className,a=e.notes,c=e.changeNote,s=e.createNote,r=e.deleteNote,i=Object(n.useRef)(),l=Object(n.useState)(N),u=Object(m.a)(l,2),d=u[0],g=u[1];return o.a.createElement("div",{className:"Field Field_action_".concat(d," ").concat(t||""),ref:i},a.map((function(e){return o.a.createElement(p,{key:String(e.id),note:e,changeNote:c,field:i,setNoteAction:g,deleteNote:r})})),o.a.createElement("button",{className:"Field-NewNote",onClick:s},o.a.createElement("img",{src:j.a,className:"Field-NewNoteImg",alt:"new"})),o.a.createElement("div",{className:"Field-DeleteNote",onClick:s},o.a.createElement("img",{src:w.a,className:"Field-DeleteNoteImg",alt:"delete"})))},y=(a(19),{lastNoteId:0,notes:{0:{id:0,text:"Welcome to Sticky Notes \u2014 my test app on React\n\nFeatures:\n\n* Create new note with button in bottom right corner of the field\n\n* Move note with grip in top right corner of the note (appears on hover)\n\n* Resize note with grip in bottom right corner of the note (appears on hover)\n\n* Delete note by moving it to bottom left corner of the field\n\n* Colors and z-indexes are set automatically\n\n* Notes are saved in browser using local storage",x:.15,y:.15,width:.4,height:.4}}});var S=function(){var e=Object(n.useState)({lastNoteId:-1,notes:{}}),t=Object(m.a)(e,2),a=t[0],c=t[1],s=Object(n.useCallback)((function(e){var t=e.key,a=e.newValue;"store"===t&&c(Object.assign(JSON.parse(a),{isSetFromLocalStorage:!0}))}),[c]);Object(n.useEffect)((function(){var e=localStorage.getItem("store");return c(e?JSON.parse(e):y),window.addEventListener("storage",s),function(){return window.removeEventListener("storage",s)}}),[c,s]),Object(n.useEffect)((function(){var e=a.isSetFromLocalStorage,t=Object(u.a)(a,["isSetFromLocalStorage"]);e||localStorage.setItem("store",JSON.stringify(t))}),[a]);var d=Object(n.useCallback)((function(e,t){c(Object(l.a)(Object(l.a)({},a),{},{notes:Object(l.a)(Object(l.a)({},a.notes),{},Object(i.a)({},e,Object.assign({},a.notes[e],t))),isSetFromLocalStorage:!1}))}),[a,c]),g=Object(n.useCallback)((function(){c({notes:Object(l.a)(Object(l.a)({},a.notes),{},Object(i.a)({},a.lastNoteId+1,{id:a.lastNoteId+1,text:"",x:.35,y:.35,width:.3,height:.3})),lastNoteId:a.lastNoteId+1,isSetFromLocalStorage:!1})}),[a,c]),b=Object(n.useCallback)((function(e){var t=a.notes,n=(t[e],Object(u.a)(t,[e].map(r.a)));c(Object(l.a)(Object(l.a)({},a),{},{notes:n,isSetFromLocalStorage:!1}))}),[a,c]);return o.a.createElement("div",{className:"App"},o.a.createElement(x,{notes:Object.values(a.notes),changeNote:d,createNote:g,deleteNote:b}))};a(20);s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(S,null)),document.getElementById("root"))}],[[12,1,2]]]);
//# sourceMappingURL=main.d33b4a25.chunk.js.map
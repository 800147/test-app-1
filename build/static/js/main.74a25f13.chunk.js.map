{"version":3,"sources":["components/Note/arrow_move.svg","components/Note/arrow_expand_alt2.svg","components/Field/icon_plus.svg","components/Field/icon_trash_alt.svg","components/Note/Note.jsx","components/Field/Field.jsx","App.js","index.js"],"names":["module","exports","Action","Note","className","note","id","text","x","y","width","height","changeNote","deleteNote","field","setNoteAction","useState","mouseOffset","setMouseOffset","action","setAction","self","useRef","onMouseMove","useCallback","e","current","getBoundingClientRect","fieldX","fieldY","fieldWidth","fieldHeight","pageX","pageY","Math","max","onMouseUp","useEffect","document","addEventListener","removeEventListener","onMoveMouseDown","onResizeMouseDown","changeText","value","currentTarget","style","zIndex","round","ref","onChange","placeholder","onMouseDown","src","moveImg","alt","resizeImg","Field","notes","createNote","noteAction","map","key","String","onClick","plusImg","trashImg","defaultStore","lastNoteId","0","App","store","setStore","onStorage","newValue","Object","assign","JSON","parse","isSetFromLocalStorage","localStore","localStorage","getItem","window","forLocalStorage","setItem","stringify","noteChanges","newNotes","values","ReactDOM","render","StrictMode","getElementById"],"mappings":"sGAAAA,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,+C,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,4C,kQCM9BC,EACL,OADKA,EAEL,OAFKA,EAGH,SAMGC,EAAO,SAAC,GAcd,IAbLC,EAaI,EAbJA,UAaI,IAZJC,KACEC,EAWE,EAXFA,GACAC,EAUE,EAVFA,KACAC,EASE,EATFA,EACAC,EAQE,EARFA,EACAC,EAOE,EAPFA,MACAC,EAME,EANFA,OAEFC,EAII,EAJJA,WACAC,EAGI,EAHJA,WACAC,EAEI,EAFJA,MACAC,EACI,EADJA,cACI,EACkCC,mBAAS,CAAER,EAAG,EAAGC,EAAG,IADtD,mBACGQ,EADH,KACgBC,EADhB,OAEwBF,mBAASd,GAFjC,mBAEGiB,EAFH,KAEWC,EAFX,KAGEC,EAAOC,mBAEPC,EAAcC,uBAAY,SAACC,GAAO,IAAD,EAMjCX,EAAMY,QAAQC,wBAJbC,EAFgC,EAEnCpB,EACGqB,EAHgC,EAGnCpB,EACOqB,EAJ4B,EAInCpB,MACQqB,EAL2B,EAKnCpB,OAGEQ,IAAWjB,GACbU,EAAWN,EAAI,CACbE,GAAIiB,EAAEO,MAAQJ,GAAUE,EAAab,EAAYT,EACjDC,GAAIgB,EAAEQ,MAAQJ,GAAUE,EAAcd,EAAYR,IAIlDU,IAAWjB,GACbU,EAAWN,EAAI,CACbI,MAAOwB,KAAKC,KAAKV,EAAEO,MAAQJ,GAAUE,EAAab,EAAYT,EAvCpD,IAwCVG,OAAQuB,KAAKC,KAAKV,EAAEQ,MAAQJ,GAAUE,EAAcd,EAAYR,EAvCrD,QA0Cd,CAACQ,EAAaH,EAAOR,EAAIM,EAAYO,IAElCiB,EAAYZ,uBAAY,SAACC,GAAO,IAAD,EAM/BX,EAAMY,QAAQC,wBAJbC,EAF8B,EAEjCpB,EACGqB,EAH8B,EAGjCpB,EACOqB,EAJ0B,EAIjCpB,MACQqB,EALyB,EAKjCpB,OAGFS,EAAUlB,GACVa,EAAcb,IAGXuB,EAAEO,MAAQJ,GAAUE,GAAc,KAClCL,EAAEQ,MAAQJ,GAAUE,GAAe,IAEpClB,EAAWP,KAEZ,CAACc,EAAWL,EAAeT,EAAIQ,EAAOD,IAEzCwB,qBAAU,WACR,GAAIlB,IAAWjB,EAQf,OAJAoC,SAASC,iBAAiB,YAAahB,GACvCe,SAASC,iBAAiB,UAAWH,GACrCE,SAASC,iBAAiB,aAAcH,GAEjC,WACLE,SAASE,oBAAoB,YAAajB,GAC1Ce,SAASE,oBAAoB,UAAWJ,GACxCE,SAASE,oBAAoB,aAAcJ,MAE5C,CAACjB,EAAQI,EAAaa,IAEzB,IAAMK,EAAkBjB,uBAAY,SAACC,GAAO,IAAD,EAMrCX,EAAMY,QAAQC,wBAJbC,EAFoC,EAEvCpB,EACGqB,EAHoC,EAGvCpB,EACOqB,EAJgC,EAIvCpB,MACQqB,EAL+B,EAKvCpB,OAGFO,EAAe,CACbV,GAAIiB,EAAEO,MAAQJ,GAAUE,EAAatB,EACrCC,GAAIgB,EAAEQ,MAAQJ,GAAUE,EAActB,IAGxCW,EAAUlB,GACVa,EAAcb,KACb,CAACY,EAAOI,EAAgBE,EAAWZ,EAAGC,EAAGM,IAEtC2B,EAAoBlB,uBAAY,SAACC,GAAO,IAAD,EAMvCX,EAAMY,QAAQC,wBAJbC,EAFsC,EAEzCpB,EACGqB,EAHsC,EAGzCpB,EACOqB,EAJkC,EAIzCpB,MACQqB,EALiC,EAKzCpB,OAGFO,EAAe,CACbV,GAAIiB,EAAEO,MAAQJ,GAAUE,EAAapB,EACrCD,GAAIgB,EAAEQ,MAAQJ,GAAUE,EAAcpB,IAGxCS,EAAUlB,GACVa,EAAcb,KACb,CAACY,EAAOI,EAAgBE,EAAWV,EAAOC,EAAQI,IAE/C4B,EAAanB,uBAAY,YAAmC,IAAfoB,EAAc,EAA/BC,cAAiBD,MACjDhC,EAAWN,EAAI,CAAEC,KAAMqC,MACtB,CAAChC,EAAYN,IAEhB,OACE,yBACEF,UAAS,0BAAqBE,EAAK,EAA1B,wBAA2Ca,EAA3C,YAAqDf,GAAa,IAC3E0C,MAAO,CACL,MAAOtC,EACP,MAAOC,EACP,UAAWC,EACX,WAAYC,EACZoC,OAAQb,KAAKc,MAAU,IAAJvC,IAErBwC,IAAK5B,GAEL,8BACEjB,UAAU,YACV8C,SAAUP,EACVC,MAAOrC,EACP4C,YAAY,eAEd,yBACE/C,UAAU,YACVgD,YAAaX,GAEb,yBAAKY,IAAKC,IAASlD,UAAU,eAAemD,IAAI,UAElD,yBACEnD,UAAU,cACVgD,YAAaV,GAEb,yBAAKW,IAAKG,IAAWpD,UAAU,iBAAiBmD,IAAI,c,yCCrJ/CE,EAAQ,SAAC,GAA8D,IAA5DrD,EAA2D,EAA3DA,UAAWsD,EAAgD,EAAhDA,MAAO9C,EAAyC,EAAzCA,WAAY+C,EAA6B,EAA7BA,WAAY9C,EAAiB,EAAjBA,WAC1DQ,EAAOC,mBADoE,EAE7CN,mBAASd,GAFoC,mBAE1E0D,EAF0E,KAE9D7C,EAF8D,KAIjF,OACE,yBAAKX,UAAS,6BAAwBwD,EAAxB,YAAsCxD,GAAa,IAAM6C,IAAK5B,GAExEqC,EAAMG,KAAI,SAACxD,GAAD,OACR,kBAAC,EAAD,CACEyD,IAAKC,OAAO1D,EAAKC,IACjBD,KAAMA,EACNO,WAAYA,EACZE,MAAOO,EACPN,cAAeA,EACfF,WAAYA,OAIlB,4BAAQT,UAAU,gBAAgB4D,QAASL,GACzC,yBAAKN,IAAKY,IAAS7D,UAAU,mBAAmBmD,IAAI,SAEtD,yBAAKnD,UAAU,mBAAmB4D,QAASL,GACzC,yBAAKN,IAAKa,IAAU9D,UAAU,sBAAsBmD,IAAI,cChB1DY,G,MAAe,CACnBC,WAAY,EACZV,MAAO,CACLW,EAAG,CACD/D,GAAI,EACJC,KAdJ,0cAeIC,EAAG,IACHC,EAAG,IACHC,MAAO,GACPC,OAAQ,OA2FC2D,MAtFf,WAAgB,IAAD,EACatD,mBAAS,CAAEoD,YAAa,EAAGV,MAAO,KAD/C,mBACNa,EADM,KACCC,EADD,KAGPC,EAAYjD,uBAAY,YAAwB,IAArBsC,EAAoB,EAApBA,IAAKY,EAAe,EAAfA,SACxB,UAARZ,GAIJU,EAASG,OAAOC,OAAOC,KAAKC,MAAMJ,GAAW,CAAEK,uBAAuB,OACrE,CAACP,IAEJnC,qBAAU,WACR,IAAM2C,EAAaC,aAAaC,QAAQ,SAUxC,OAPEV,EADEQ,EACOH,KAAKC,MAAME,GAEXb,GAGXgB,OAAO5C,iBAAiB,UAAWkC,GAE5B,kBAAMU,OAAO3C,oBAAoB,UAAWiC,MAClD,CAACD,EAAUC,IAEdpC,qBAAU,WAAO,IACP0C,EAA8CR,EAA9CQ,sBAA0BK,EADpB,YACwCb,EADxC,2BAGVQ,GAIJE,aAAaI,QAAQ,QAASR,KAAKS,UAAUF,MAC5C,CAACb,IAEJ,IAAM3D,EAAaY,uBAAY,SAAClB,EAAIiF,GAClCf,EAAS,2BACJD,GADG,IAENb,MAAM,2BACDa,EAAMb,OADN,kBAEFpD,EAAKqE,OAAOC,OAAO,GAAIL,EAAMb,MAAMpD,GAAKiF,KAE3CR,uBAAuB,OAExB,CAACR,EAAOC,IAELb,EAAanC,uBAAY,WAC7BgD,EAAS,CACPd,MAAM,2BACDa,EAAMb,OADN,kBAEFa,EAAMH,WAAa,EAAI,CACtB9D,GAAIiE,EAAMH,WAAa,EACvB7D,KAAM,GACNC,EAAG,IACHC,EAAG,IACHC,MAAO,GACPC,OAAQ,MAGZyD,WAAYG,EAAMH,WAAa,EAC/BW,uBAAuB,MAExB,CAACR,EAAOC,IAEL3D,EAAaW,uBAAY,SAAClB,GAAQ,IAAD,EACEiE,EAAMb,MAAnB8B,GADW,EAC5BlF,GAD4B,eAC5BA,GAD4B,WAGrCkE,EAAS,2BACJD,GADG,IAENb,MAAO8B,EACPT,uBAAuB,OAExB,CAACR,EAAOC,IAEX,OACE,yBAAKpE,UAAU,OACb,kBAAC,EAAD,CACEsD,MAAOiB,OAAOc,OAAOlB,EAAMb,OAC3B9C,WAAYA,EACZ+C,WAAYA,EACZ9C,WAAYA,M,MCvGpB6E,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFtD,SAASuD,eAAe,W","file":"static/js/main.74a25f13.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/arrow_move.1663e72a.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow_expand_alt2.3e06be33.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon_plus.fb477983.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon_trash_alt.e80824a2.svg\";","import React, { useCallback, useState, useEffect, useRef } from 'react';\n\nimport './Note.css';\nimport moveImg from './arrow_move.svg';\nimport resizeImg from './arrow_expand_alt2.svg';\n\nexport const Action = {\n  NONE: 'none',\n  MOVE: 'move',\n  RESIZE: 'resize'\n};\n\nconst MIN_WIDTH = 0.1;\nconst MIN_HEIGHT = 0.1;\n\nexport const Note = ({\n  className,\n  note: {\n    id,\n    text,\n    x,\n    y,\n    width,\n    height,\n  },\n  changeNote,\n  deleteNote,\n  field,\n  setNoteAction\n}) => {\n  const [mouseOffset, setMouseOffset] = useState({ x: 0, y: 0 });\n  const [action, setAction] = useState(Action.NONE);\n  const self = useRef();\n\n  const onMouseMove = useCallback((e) => {\n    const {\n      x: fieldX,\n      y: fieldY,\n      width: fieldWidth,\n      height: fieldHeight\n    } = field.current.getBoundingClientRect();\n\n    if (action === Action.MOVE) {\n      changeNote(id, {\n        x: (e.pageX - fieldX) / fieldWidth - mouseOffset.x,\n        y: (e.pageY - fieldY) / fieldHeight - mouseOffset.y\n      })\n    }\n\n    if (action === Action.RESIZE) {\n      changeNote(id, {\n        width: Math.max((e.pageX - fieldX) / fieldWidth - mouseOffset.x, MIN_WIDTH),\n        height: Math.max((e.pageY - fieldY) / fieldHeight - mouseOffset.y, MIN_HEIGHT)\n      })\n    }\n  }, [mouseOffset, field, id, changeNote, action]);\n\n  const onMouseUp = useCallback((e) => {\n    const {\n      x: fieldX,\n      y: fieldY,\n      width: fieldWidth,\n      height: fieldHeight\n    } = field.current.getBoundingClientRect();\n\n    setAction(Action.NONE);\n    setNoteAction(Action.NONE);\n\n    if (\n      (e.pageX - fieldX) / fieldWidth <= 0.1 &&\n      (e.pageY - fieldY) / fieldHeight >= 0.9\n    ) {\n      deleteNote(id);\n    }\n  }, [setAction, setNoteAction, id, field, deleteNote]);\n\n  useEffect(() => {\n    if (action === Action.NONE) {\n      return;\n    }\n\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n    document.addEventListener('mouseleave', onMouseUp);\n\n    return () => {\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n      document.removeEventListener('mouseleave', onMouseUp);\n    }\n  }, [action, onMouseMove, onMouseUp]);\n\n  const onMoveMouseDown = useCallback((e) => {\n    const {\n      x: fieldX,\n      y: fieldY,\n      width: fieldWidth,\n      height: fieldHeight\n    } = field.current.getBoundingClientRect();\n\n    setMouseOffset({\n      x: (e.pageX - fieldX) / fieldWidth - x,\n      y: (e.pageY - fieldY) / fieldHeight - y\n    });\n\n    setAction(Action.MOVE);\n    setNoteAction(Action.MOVE);\n  }, [field, setMouseOffset, setAction, x, y, setNoteAction]);\n\n  const onResizeMouseDown = useCallback((e) => {\n    const {\n      x: fieldX,\n      y: fieldY,\n      width: fieldWidth,\n      height: fieldHeight\n    } = field.current.getBoundingClientRect();\n\n    setMouseOffset({\n      x: (e.pageX - fieldX) / fieldWidth - width,\n      y: (e.pageY - fieldY) / fieldHeight - height\n    });\n\n    setAction(Action.RESIZE);\n    setNoteAction(Action.RESIZE);\n  }, [field, setMouseOffset, setAction, width, height, setNoteAction]);\n\n  const changeText = useCallback(({ currentTarget: { value } }) => {\n    changeNote(id, { text: value });\n  }, [changeNote, id]);\n\n  return (\n    <div\n      className={`Note Note_color_${id % 5} Note_action_${action} ${className || ''}`}\n      style={{\n        '--x': x,\n        '--y': y,\n        '--width': width,\n        '--height': height,\n        zIndex: Math.round(y * 10000)\n      }}\n      ref={self}\n    >\n      <textarea\n        className=\"Note-Text\"\n        onChange={changeText}\n        value={text}\n        placeholder=\"Empty note\"\n      />\n      <div\n        className=\"Note-Move\"\n        onMouseDown={onMoveMouseDown}\n      >\n        <img src={moveImg} className=\"Note-MoveImg\" alt=\"move\" />\n      </div>\n      <div\n        className=\"Note-Resize\"\n        onMouseDown={onResizeMouseDown}\n      >\n        <img src={resizeImg} className=\"Note-ResizeImg\" alt=\"resize\" />\n      </div>\n    </div>\n  );\n}\n","import React, { useRef, useState } from 'react';\n\nimport { Note } from '../Note/Note';\n\nimport './Field.css';\nimport { Action } from '../Note/Note';\nimport plusImg from './icon_plus.svg';\nimport trashImg from './icon_trash_alt.svg';\n\nexport const Field = ({ className, notes, changeNote, createNote, deleteNote }) => {\n  const self = useRef();\n  const [noteAction, setNoteAction] = useState(Action.NONE);\n\n  return (\n    <div className={`Field Field_action_${noteAction} ${className || ''}`} ref={self}>\n      {\n        notes.map((note) => (\n          <Note\n            key={String(note.id)}\n            note={note}\n            changeNote={changeNote}\n            field={self}\n            setNoteAction={setNoteAction}\n            deleteNote={deleteNote}\n          />\n        ))\n      }\n      <button className=\"Field-NewNote\" onClick={createNote}>\n        <img src={plusImg} className=\"Field-NewNoteImg\" alt=\"new\" />\n      </button>\n      <div className=\"Field-DeleteNote\" onClick={createNote}>\n        <img src={trashImg} className=\"Field-DeleteNoteImg\" alt=\"delete\" />\n      </div>\n    </div>\n  );\n};\n","import React, { useState, useCallback, useEffect } from 'react';\n\nimport { Field } from './components/Field/Field';\nimport './App.css';\n\nconst FIRST_NODE_TEXT =\n  'Welcome to Sticky Notes — my test app on React\\n\\n' +\n  'Features:\\n\\n' +\n  '* Create new note with button in bottom right corner of the field\\n\\n' +\n  '* Move note with grip in top right corner of the note (appears on hover)\\n\\n' +\n  '* Resize note with grip in bottom right corner of the note (appears on hover)\\n\\n' +\n  '* Delete note by moving it to bottom left corner of the field\\n\\n' +\n  '* Colors and z-indexes are set automatically\\n\\n' +\n  '* Notes are saved in browser using local storage';\n\nconst defaultStore = {\n  lastNoteId: 0,\n  notes: {\n    0: {\n      id: 0,\n      text: FIRST_NODE_TEXT,\n      x: 0.15,\n      y: 0.15,\n      width: 0.40,\n      height: 0.40\n    }\n  }\n};\n\nfunction App() {\n  const [store, setStore] = useState({ lastNoteId: -1, notes: {} });\n\n  const onStorage = useCallback(({ key, newValue }) => {\n    if (key !== 'store') {\n      return;\n    }\n\n    setStore(Object.assign(JSON.parse(newValue), { isSetFromLocalStorage: true }));\n  }, [setStore]);\n\n  useEffect(() => {\n    const localStore = localStorage.getItem('store');\n\n    if (localStore) {\n      setStore(JSON.parse(localStore));\n    } else {\n      setStore(defaultStore);\n    }\n\n    window.addEventListener('storage', onStorage);\n\n    return () => window.removeEventListener('storage', onStorage);\n  }, [setStore, onStorage]);\n\n  useEffect(() => {\n    const { isSetFromLocalStorage, ...forLocalStorage } = store;\n\n    if (isSetFromLocalStorage) {\n      return;\n    }\n\n    localStorage.setItem('store', JSON.stringify(forLocalStorage));\n  }, [store]);\n\n  const changeNote = useCallback((id, noteChanges) => {\n    setStore({\n      ...store,\n      notes: {\n        ...store.notes,\n        [id]: Object.assign({}, store.notes[id], noteChanges)\n      },\n      isSetFromLocalStorage: false\n    });\n  }, [store, setStore]);\n\n  const createNote = useCallback(() => {\n    setStore({\n      notes: {\n        ...store.notes,\n        [store.lastNoteId + 1]: {\n          id: store.lastNoteId + 1,\n          text: '',\n          x: 0.35,\n          y: 0.35,\n          width: 0.30,\n          height: 0.30\n        }\n      },\n      lastNoteId: store.lastNoteId + 1,\n      isSetFromLocalStorage: false\n    });\n  }, [store, setStore]);\n\n  const deleteNote = useCallback((id) => {\n    const { [id]: deleted, ...newNotes } = store.notes;\n\n    setStore({\n      ...store,\n      notes: newNotes,\n      isSetFromLocalStorage: false\n    });\n  }, [store, setStore]);\n\n  return (\n    <div className=\"App\">\n      <Field\n        notes={Object.values(store.notes)}\n        changeNote={changeNote}\n        createNote={createNote}\n        deleteNote={deleteNote}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}